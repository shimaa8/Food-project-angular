"use strict";(self.webpackChunkfoodApp=self.webpackChunkfoodApp||[]).push([[657],{657:(O,m,s)=>{s.r(m),s.d(m,{RecipesModule:()=>Y});var l=s(6895),e=s(4650),u=s(2866),_=s(2486),Z=s(5412),f=s(7185),d=s(3456),a=s(4006);function T(i,r){if(1&i&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function A(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij("",t.name," ")}}function v(i,r){if(1&i&&(e.ynx(0),e.YNc(1,A,2,1,"span",19),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.category)}}function b(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1," No Category"),e.qZA())}const x=function(i){return["/dashboard/admin/recipes/edit",i]};function q(i,r){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",20),e._UZ(4,"img",21),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.YNc(12,v,2,1,"ng-container",17),e.YNc(13,b,2,0,"span",17),e.qZA(),e.TgZ(14,"td",22)(15,"div",23)(16,"a",24),e._UZ(17,"i",25),e.qZA(),e.TgZ(18,"ul",26)(19,"li")(20,"a",27)(21,"span"),e._UZ(22,"i",28),e.qZA(),e.TgZ(23,"span"),e._uU(24,"View"),e.qZA()()(),e.TgZ(25,"li")(26,"a",29)(27,"span"),e._UZ(28,"i",28),e.qZA(),e.TgZ(29,"span"),e._uU(30,"Edit"),e.qZA()()(),e.TgZ(31,"li")(32,"a",27)(33,"span"),e._UZ(34,"i",28),e.qZA(),e.TgZ(35,"span"),e._uU(36,"Delete"),e.qZA()()()()()()()),2&i){const t=r.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("src","https://upskilling-egypt.com/"+t.imagePath,e.LSH),e.xp6(2),e.Oqu(t.price),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.tag.name),e.xp6(2),e.Q6J("ngIf",t.category.length>0),e.xp6(1),e.Q6J("ngIf",0==t.category.length),e.xp6(13),e.Q6J("routerLink",e.VKq(8,x,t.id))}}function U(i,r){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,q,37,10,"tr",19),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.tableData)}}function y(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1," No Data "),e.qZA())}const C=function(){return["/dashboard/admin/recipes/add"]};let R=(()=>{class i{constructor(t,n,o,p){this._RecipeService=t,this._HelperService=n,this.dialog=o,this._ToastrService=p,this.pageSize=25,this.pageNumber=1,this.tableData=[],this.searchValue="",this.tags=[]}ngOnInit(){this.getAllTags(),this.getTableData()}getTableData(){this._RecipeService.getRecipes({pageSize:this.pageSize,pageNumber:this.pageNumber,name:this.searchValue,tagId:this.tagId}).subscribe({next:n=>{this.tableResponse=n,this.tableData=this.tableResponse?.data,console.log(this.tableData?.length)}})}getAllTags(){this._HelperService.getTags().subscribe({next:t=>{console.log(t),this.tags=t}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(u.j),e.Y36(_.W),e.Y36(Z.uw),e.Y36(f._W))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipes"]],decls:45,vars:7,consts:[[1,"page-header"],[1,"container"],[1,"row","align-items-center"],[1,"col-9"],[1,"col-3"],[1,"text-end"],["src","../../../assets/images/menu-avatar.svg","alt","",1,"w-75"],[1,"container","py-4"],[1,"row"],[1,"col-md-6"],["type","text","placeholder","Search here",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"col-md-3"],["aria-label","Default select example",1,"form-select",3,"ngModel","ngModelChange","change"],["selected",""],[3,"value",4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",1,"primary",3,"routerLink"],[1,"table","table-striped"],[4,"ngIf"],[3,"value"],[4,"ngFor","ngForOf"],[1,"w-25"],["alt","",1,"w-50",3,"src"],[1,"text-center"],[1,"dropdown"],["href","#","role","button","id","dropdownMenuLink","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","text-muted"],[1,"fa-solid","fa-ellipsis","fa-2x"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu"],[1,"dropdown-item"],[1,"fa-solid","fa-pen-to-square"],[1,"dropdown-item",3,"routerLink"]],template:function(n,o){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),e._uU(5,"Recipes "),e.TgZ(6,"span"),e._uU(7,"Item"),e.qZA()(),e.TgZ(8,"p"),e._uU(9,"You can now add your items that any user can order it from the Application and you can edit"),e.qZA()(),e.TgZ(10,"div",4)(11,"div",5),e._UZ(12,"img",6),e.qZA()()()()(),e.TgZ(13,"section")(14,"div",7)(15,"div",8)(16,"div",9)(17,"input",10),e.NdJ("ngModelChange",function(c){return o.searchValue=c})("keyup",function(){return o.getTableData()}),e.qZA()(),e.TgZ(18,"div",11)(19,"select",12),e.NdJ("ngModelChange",function(c){return o.tagId=c})("change",function(){return o.getTableData()}),e.TgZ(20,"option",13),e._uU(21,"All"),e.qZA(),e.YNc(22,T,2,2,"option",14),e.qZA()(),e.TgZ(23,"div",11)(24,"button",15),e._uU(25,"Add New Recipe"),e.qZA()()(),e.TgZ(26,"table",16)(27,"thead")(28,"tr")(29,"th"),e._uU(30,"Name"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Image"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"Price"),e.qZA(),e.TgZ(35,"th"),e._uU(36,"Descrption"),e.qZA(),e.TgZ(37,"th"),e._uU(38,"Tag"),e.qZA(),e.TgZ(39,"th"),e._uU(40,"Category"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"Actions"),e.qZA()()(),e.YNc(43,U,2,1,"tbody",17),e.YNc(44,y,2,0,"div",17),e.qZA()()()),2&n&&(e.xp6(17),e.Q6J("ngModel",o.searchValue),e.xp6(2),e.Q6J("ngModel",o.tagId),e.xp6(3),e.Q6J("ngForOf",o.tags),e.xp6(2),e.Q6J("routerLink",e.DdM(6,C)),e.xp6(19),e.Q6J("ngIf",o.tableData.length>0),e.xp6(1),e.Q6J("ngIf",0==o.tableData.length))},dependencies:[l.sg,l.O5,d.rH,d.Od,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.On],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{display:none}"]})}return i})();var I=s(1961),g=s(8997);function w(i,r){if(1&i&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.name)}}function N(i,r){if(1&i&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.name)}}function J(i,r){1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._UZ(1,"i",23),e._uU(2," Drag & Drop or "),e.TgZ(3,"span",24),e._uU(4,"Choose a Item Image"),e.qZA(),e._uU(5," to Upload "),e.qZA())}function S(i,r){if(1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._UZ(1,"img",25),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imgSrc,e.LSH)}}function D(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",26),e.NdJ("removed",function(){const p=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onRemove(p))}),e.qZA()}2&i&&e.Q6J("file",r.$implicit)("removable",!0)}let h=(()=>{class i{constructor(t,n,o,p){this.router=t,this._ActivatedRoute=n,this._HelperService=o,this._RecipeService=p,this.tags=[],this.categories=[],this.isUpdatePage=!1,this.recipeForm=new a.cw({name:new a.NI(null),description:new a.NI(null),price:new a.NI(null),tagId:new a.NI(null),categoriesIds:new a.NI(null)}),this.files=[],this.recipeId=n.snapshot.params.id,this.recipeId?(this.isUpdatePage=!0,this.getRecipesById(this.recipeId)):this.isUpdatePage=!1}ngOnInit(){this.getAllTags(),this.getAllCategories()}getRecipesById(t){this._RecipeService.getRecipeById(t).subscribe({next:n=>{console.log(n),this.recipeData=n},error:n=>{},complete:()=>{this.imgSrc="https://upskilling-egypt.com/"+this.recipeData.imagePath,this.recipeForm.patchValue({name:this.recipeData?.name,price:this.recipeData?.price,description:this.recipeData?.description,tagId:this.recipeData?.tag.id,categoriesIds:this.recipeData?.category[0].id})}})}onSubmit(t){console.log(t.value);let n=new FormData;n.append("name",t.value.name),n.append("price",t.value.price),n.append("description",t.value.description),n.append("categoriesIds",t.value.categoriesIds),n.append("tagId",t.value.tagId),n.append("recipeImage",this.imgSrc,this.imgSrc.name),this.recipeId?this._RecipeService.editRecipe(this.recipeId,n).subscribe({next:o=>{console.log(o)},error:()=>{},complete:()=>{this.router.navigate(["/dashboard/admin/recipes"])}}):this._RecipeService.addRecipe(n).subscribe({next:o=>{console.log(o)},error:()=>{},complete:()=>{this.router.navigate(["/dashboard/admin/recipes"])}})}edit(){}add(){}getAllTags(){this._HelperService.getTags().subscribe({next:t=>{console.log(t),this.tags=t}})}getAllCategories(){this._HelperService.getCategories().subscribe({next:t=>{this.categories=t.data,console.log(t)}})}onSelect(t){console.log(t),this.imgSrc=t.addedFiles[0],this.files.push(...t.addedFiles)}onRemove(t){console.log(t),this.files.splice(this.files.indexOf(t),1)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(d.F0),e.Y36(d.gz),e.Y36(_.W),e.Y36(u.j))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-edit-recipe"]],decls:47,vars:7,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"row","card-auth","shadow-sm"],[1,"col-md-10","mx-auto"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-lock"],["formControlName","name","type","text","placeholder","Recipe Name","aria-label","Enter Your Email","aria-describedby","basic-addon1",1,"form-control"],["formControlName","price","type","number","placeholder","Price","aria-label","Enter Your Email","aria-describedby","basic-addon1",1,"form-control"],["for",""],["formControlName","tagId","aria-label","Default select example",1,"form-select"],["selected",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,"my-3"],["id","basic-addon11",1,"input-group-text"],["formControlName","categoriesIds","aria-label","Default select example",1,"form-select"],["formControlName","description","type","text","placeholder","Description","aria-label","Enter Your Email","aria-describedby","basic-addon1",1,"form-control"],[3,"multiple","change"],[4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],["type","button",1,"outline-primary"],[1,"primary"],[3,"ngValue"],[1,"fa-solid","fa-arrow-up-from-bracket","d-block"],[1,"text-main"],["alt","",1,"w-25",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"]],template:function(n,o){1&n&&(e.TgZ(0,"section",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit(o.recipeForm)}),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),e._UZ(6,"i",6),e.qZA(),e._UZ(7,"input",7),e.qZA(),e.TgZ(8,"div",4)(9,"span",5),e._UZ(10,"i",6),e.qZA(),e._UZ(11,"input",8),e.qZA(),e.TgZ(12,"div")(13,"label",9),e._uU(14,"Tag"),e.qZA(),e.TgZ(15,"div",4)(16,"span",5),e._UZ(17,"i",6),e.qZA(),e.TgZ(18,"select",10)(19,"option",11),e._uU(20,"All"),e.qZA(),e.YNc(21,w,2,2,"option",12),e.qZA()()(),e.TgZ(22,"div",13)(23,"label",9),e._uU(24,"Category"),e.qZA(),e.TgZ(25,"div",4)(26,"span",14),e._UZ(27,"i",6),e.qZA(),e.TgZ(28,"select",15)(29,"option",11),e._uU(30,"All"),e.qZA(),e.YNc(31,N,2,2,"option",12),e.qZA()()(),e.TgZ(32,"div",4)(33,"span",5),e._UZ(34,"i",6),e.qZA(),e.TgZ(35,"textarea",16),e._uU(36,"          "),e.qZA()(),e.TgZ(37,"div")(38,"ngx-dropzone",17),e.NdJ("change",function(c){return o.onSelect(c)}),e.YNc(39,J,6,0,"ngx-dropzone-label",18),e.YNc(40,S,2,1,"ngx-dropzone-label",18),e.YNc(41,D,1,2,"ngx-dropzone-image-preview",19),e.qZA()(),e.TgZ(42,"div")(43,"button",20),e._uU(44,"cancel"),e.qZA(),e.TgZ(45,"button",21),e._uU(46,"Save"),e.qZA()()()()()()),2&n&&(e.xp6(1),e.Q6J("formGroup",o.recipeForm),e.xp6(20),e.Q6J("ngForOf",o.tags),e.xp6(10),e.Q6J("ngForOf",o.categories),e.xp6(7),e.Q6J("multiple",!1),e.xp6(1),e.Q6J("ngIf",!o.imgSrc),e.xp6(1),e.Q6J("ngIf",o.imgSrc),e.xp6(1),e.Q6J("ngForOf",o.files))},dependencies:[l.sg,l.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,g._f,g.NP,g.sv]})}return i})();const F=[{path:"",component:R},{path:"add",component:h},{path:"edit/:id",component:h}];let Y=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[l.ez,d.Bz.forChild(F),I.S]})}return i})()}}]);